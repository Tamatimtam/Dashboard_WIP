{% extends "base.html" %}

{% block content %}
<section class="kpi-section">
    <h2 class="section-title">Key Metrics Overview</h2>
    <div class="kpi-grid">
        <div class="kpi-card">
            <div class="kpi-icon">ğŸ‘¥</div>
            <div class="kpi-content">
                <h3 class="kpi-label">Total Respondents</h3>
                <p class="kpi-value">{{ total_respondents }}</p>
            </div>
        </div>

        <div class="kpi-card surplus">
            <div class="kpi-icon">ğŸ’°</div>
            <div class="kpi-content">
                <h3 class="kpi-label">Surplus</h3>
                <p class="kpi-value">{{ surplus_pct }}%</p>
            </div>
        </div>

        <div class="kpi-card deficit">
            <div class="kpi-icon">âš ï¸</div>
            <div class="kpi-content">
                <h3 class="kpi-label">Deficit</h3>
                <p class="kpi-value">{{ deficit_pct }}%</p>
            </div>
        </div>

        <div class="kpi-card breakeven">
            <div class="kpi-icon">âš–ï¸</div>
            <div class="kpi-content">
                <h3 class="kpi-label">Break-even</h3>
                <p class="kpi-value">{{ breakeven_pct }}%</p>
            </div>
        </div>

        <div class="kpi-card income">
            <div class="kpi-icon">ğŸ’µ</div>
            <div class="kpi-content">
                <h3 class="kpi-label">Most Common Income</h3>
                <p class="kpi-value-small">{{ most_common_income }}</p>
            </div>
        </div>

        <div class="kpi-card expense">
            <div class="kpi-icon">ğŸ’¸</div>
            <div class="kpi-content">
                <h3 class="kpi-label">Most Common Expense</h3>
                <p class="kpi-value-small">{{ most_common_expense }}</p>
            </div>
        </div>
    </div>
</section>

<section class="chart-section">
    <div class="chart-container">
        <div class="chart-wrapper">
            {{ chart_html|safe }}
        </div>
        <div class="chart-insights">
            <h3>ğŸ“Œ Key Insights</h3>
            <ul>
                <li><strong>Symmetry shows balance:</strong> If bars extend equally on both sides, income and expense distributions are similar.</li>
                <li><strong>Red (left) dominance:</strong> More people have expenses in that category.</li>
                <li><strong>Blue (right) dominance:</strong> More people earn income in that category.</li>
                <li><strong>Diagonal alignment:</strong> Look for where income and expense categories match.</li>
            </ul>
        </div>
    </div>
</section>
{% endblock %}
